---
/**
 * BillTestimonials Component
 *
 * Testimonials section featuring ROI-focused results from
 * commercial poultry operations. Focuses on measurable outcomes.
 *
 * Usage:
 * <BillTestimonials />
 * <BillTestimonials limit={3} />
 */

interface Props {
  /** Number of testimonials to show */
  limit?: number
  /** Heading text */
  heading?: string
  /** Additional CSS classes */
  class?: string
}

const {
  limit = 3,
  heading = 'Results from Commercial Operations',
  class: className = '',
} = Astro.props

// Bill-specific testimonials (ROI-focused, measurable results)
const testimonials = [
  {
    id: 'bill-1',
    quote:
      'We saw a 1.8% reduction in mortality and our FCR improved from 1.72 to 1.65 within the first two flocks. The ROI was evident by month three.',
    author: 'Mike S.',
    role: 'Integrator Operations Manager',
    location: 'Arkansas',
    metrics: {
      mortality: '-1.8%',
      fcr: '1.65',
      flocks: '24',
    },
    product: 'Big Ole Bird + Litter Life',
    avatar: 'üè≠',
  },
  {
    id: 'bill-2',
    quote:
      "Litter Life has been a game-changer for ammonia control. We've extended our litter cycles from 3 to 5 flocks without sacrificing air quality.",
    author: 'David R.',
    role: 'Independent Grower',
    location: 'Georgia',
    metrics: {
      ammonia: '-45%',
      litterCycles: '5',
      savings: '$12K/yr',
    },
    product: 'Litter Life',
    avatar: 'üåæ',
  },
  {
    id: 'bill-3',
    quote:
      "After implementing Big Ole Bird across our 12-house operation, we've consistently ranked in the top 5% of our integrator's growers for the past year.",
    author: 'Robert T.',
    role: 'Contract Grower',
    location: 'Alabama',
    metrics: {
      ranking: 'Top 5%',
      houses: '12',
      consistency: '12 mo',
    },
    product: 'Big Ole Bird',
    avatar: 'üèÜ',
  },
  {
    id: 'bill-4',
    quote:
      'The technical support team helped us dial in the dosing for our specific water system. Settlement weights are up 3% and our birds are healthier.',
    author: 'James P.',
    role: 'Farm Manager',
    location: 'North Carolina',
    metrics: {
      weight: '+3%',
      healthScore: 'A+',
      support: '24/7',
    },
    product: 'Commercial Starter Kit',
    avatar: 'üìä',
  },
]

const displayTestimonials = testimonials.slice(0, limit)
---

<section class:list={['bill-testimonials', className]}>
  <div class="bill-testimonials__container">
    <h2 class="bill-testimonials__heading">{heading}</h2>
    <div class="bill-testimonials__grid">
      {
        displayTestimonials.map((testimonial) => (
          <article class="testimonial-card" data-testimonial-id={testimonial.id}>
            <div class="testimonial-card__header">
              <span class="testimonial-card__avatar">{testimonial.avatar}</span>
              <div class="testimonial-card__author-info">
                <span class="testimonial-card__author">{testimonial.author}</span>
                <span class="testimonial-card__role">{testimonial.role}</span>
                <span class="testimonial-card__location">{testimonial.location}</span>
              </div>
            </div>
            <div class="testimonial-card__metrics">
              {Object.entries(testimonial.metrics).map(([key, value]) => (
                <div class="testimonial-card__metric">
                  <span class="testimonial-card__metric-value">{value}</span>
                  <span class="testimonial-card__metric-label">
                    {key.replace(/([A-Z])/g, ' $1').trim()}
                  </span>
                </div>
              ))}
            </div>
            <blockquote class="testimonial-card__quote">"{testimonial.quote}"</blockquote>
            <div class="testimonial-card__footer">
              <span class="testimonial-card__product">Using: {testimonial.product}</span>
            </div>
          </article>
        ))
      }
    </div>
    <div class="bill-testimonials__cta">
      <a href="/case-studies/" class="bill-testimonials__link"> View Full Case Studies ‚Üí </a>
    </div>
  </div>
</section>

<style>
  .bill-testimonials {
    background: #1e3a5f;
    padding: 60px 20px;
  }

  .bill-testimonials__container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .bill-testimonials__heading {
    font-family: var(--font-heading, 'Eveleth Dot', serif);
    font-size: clamp(24px, 4vw, 36px);
    color: white;
    text-align: center;
    margin-bottom: 40px;
  }

  .bill-testimonials__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 24px;
    margin-bottom: 32px;
  }

  .testimonial-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 16px;
    padding: 24px;
    transition:
      transform 0.2s,
      box-shadow 0.2s;
  }

  .testimonial-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
  }

  .testimonial-card__header {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 20px;
  }

  .testimonial-card__avatar {
    width: 48px;
    height: 48px;
    background: #e2e8f0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    flex-shrink: 0;
  }

  .testimonial-card__author-info {
    display: flex;
    flex-direction: column;
  }

  .testimonial-card__author {
    font-weight: 600;
    color: #1e293b;
    font-size: 15px;
  }

  .testimonial-card__role {
    font-size: 13px;
    color: #1e3a5f;
    font-weight: 500;
  }

  .testimonial-card__location {
    font-size: 12px;
    color: #64748b;
  }

  .testimonial-card__metrics {
    display: flex;
    gap: 16px;
    padding: 16px;
    background: #f0fdf4;
    border-radius: 12px;
    margin-bottom: 16px;
  }

  .testimonial-card__metric {
    flex: 1;
    text-align: center;
  }

  .testimonial-card__metric-value {
    display: block;
    font-size: 20px;
    font-weight: 700;
    color: #166534;
  }

  .testimonial-card__metric-label {
    display: block;
    font-size: 10px;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .testimonial-card__quote {
    font-size: 15px;
    color: #374151;
    line-height: 1.6;
    margin: 0 0 16px 0;
    font-style: italic;
  }

  .testimonial-card__footer {
    padding-top: 16px;
    border-top: 1px solid #e5e7eb;
  }

  .testimonial-card__product {
    font-size: 12px;
    color: #64748b;
    background: #f3f4f6;
    padding: 4px 10px;
    border-radius: 9999px;
  }

  .bill-testimonials__cta {
    text-align: center;
  }

  .bill-testimonials__link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-weight: 600;
    color: white;
    text-decoration: none;
    font-size: 16px;
    padding: 12px 24px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    transition: all 0.2s;
  }

  .bill-testimonials__link:hover {
    background: rgba(255, 255, 255, 0.2);
    gap: 10px;
  }
</style>
