---
/**
 * CollectionHero — Hero section for collection pages.
 *
 * Two modes:
 * 1. Themed (persona set) — Full persona-colored hero with themed copy
 * 2. Standard (no persona) — Neutral green hero with TinaCMS or Shopify content
 */
import type { PersonaId } from '../../lib/persona'

interface Props {
  title: string
  description?: string
  headline?: string
  subheadline?: string
  persona?: PersonaId
  productCount?: number
}

const { title, description, headline, subheadline, persona, productCount } = Astro.props

const displayTitle = headline || title
const displaySubheadline = subheadline || description

// Persona theme classes
const themeClasses: Record<string, { bg: string; accent: string }> = {
  backyard: {
    bg: 'from-amber-800 to-amber-900',
    accent: 'text-amber-200',
  },
  commercial: {
    bg: 'from-green-800 to-green-900',
    accent: 'text-green-200',
  },
  lawn: {
    bg: 'from-emerald-800 to-emerald-900',
    accent: 'text-emerald-200',
  },
}

const theme = persona && persona !== 'general' ? themeClasses[persona] : null
const bgClass = theme ? theme.bg : 'from-brand-green-dark to-green-900'
const accentClass = theme ? theme.accent : 'text-green-200'
---

<section class={`bg-gradient-to-br ${bgClass} px-4 py-12 sm:py-16`}>
  <div class="mx-auto max-w-6xl text-center">
    <h1 class="font-heading text-3xl text-white sm:text-4xl lg:text-5xl">
      {displayTitle}
    </h1>

    {
      displaySubheadline && (
        <p class={`mx-auto mt-4 max-w-2xl text-base sm:text-lg ${accentClass}`}>
          {displaySubheadline}
        </p>
      )
    }

    {
      productCount != null && productCount > 0 && (
        <p class="mt-3 text-sm text-white/60">
          {productCount} {productCount === 1 ? 'product' : 'products'}
        </p>
      )
    }
  </div>
</section>
