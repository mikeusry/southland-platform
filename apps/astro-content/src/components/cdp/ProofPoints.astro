---
/**
 * ProofPoints Component
 *
 * Grid of outcome statistics for a persona. Shows placeholder
 * stats initially, will be updated with real data as surveys come in.
 *
 * Usage:
 * <ProofPoints persona="commercial" />
 * <ProofPoints persona="backyard" variant="cards" />
 */

import ProofPoint from './ProofPoint.astro'

interface Props {
  /** Which persona's proof points to show */
  persona: 'backyard' | 'commercial' | 'lawn'
  /** Layout variant */
  variant?: 'default' | 'cards' | 'inline'
  /** Additional CSS classes */
  class?: string
}

const { persona, variant = 'default', class: className = '' } = Astro.props

// Proof points by persona (will be populated from BigQuery as data comes in)
// For now, these are conservative placeholder estimates
const proofPointsByPersona = {
  backyard: [
    {
      stat: '89%',
      label: 'report healthier flocks',
      icon: 'heart' as const,
      source: 'Customer Survey, 2024',
    },
    {
      stat: '4.7',
      label: 'average star rating',
      icon: 'star' as const,
      source: '150+ reviews',
    },
    {
      stat: '2-3x',
      label: 'more eggs reported',
      icon: 'trending' as const,
    },
  ],
  commercial: [
    {
      stat: '5-8pt',
      label: 'FCR improvement',
      icon: 'chart' as const,
      source: 'Customer Survey, 2024',
    },
    {
      stat: '15-20%',
      label: 'mortality reduction',
      icon: 'trending' as const,
      source: 'Commercial trials',
    },
    {
      stat: '3.2x',
      label: 'average ROI',
      icon: 'chart' as const,
      source: 'Customer reported',
    },
  ],
  lawn: [
    {
      stat: '92%',
      label: 'see results in 2 weeks',
      icon: 'check' as const,
      source: 'Customer Survey',
    },
    {
      stat: '100%',
      label: 'organic ingredients',
      icon: 'heart' as const,
    },
    {
      stat: '4.8',
      label: 'average rating',
      icon: 'star' as const,
      source: '200+ reviews',
    },
  ],
}

const points = proofPointsByPersona[persona] || []
---

<div class:list={['proof-points', `proof-points--${variant}`, className]} data-persona={persona}>
  {
    variant === 'cards'
      ? points.map((point) => (
          <ProofPoint
            stat={point.stat}
            label={point.label}
            icon={point.icon}
            source={point.source}
            variant="card"
          />
        ))
      : variant === 'inline'
        ? points.map((point) => (
            <ProofPoint stat={point.stat} label={point.label} icon={point.icon} variant="minimal" />
          ))
        : points.map((point) => (
            <ProofPoint
              stat={point.stat}
              label={point.label}
              icon={point.icon}
              source={point.source}
              variant="default"
            />
          ))
  }
</div>

<style>
  .proof-points {
    display: grid;
    gap: 24px;
  }

  .proof-points--cards {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 16px;
  }

  .proof-points--inline {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
  }

  @media (min-width: 768px) {
    .proof-points--default {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>
